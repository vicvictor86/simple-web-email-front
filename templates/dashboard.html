{% load static tailwind_tags %}
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://kit.fontawesome.com/32c339573f.js" crossorigin="anonymous"></script>
  {% tailwind_css %}
</head>

<body class="flex h-full overflow-hidden items-center justify-center w-full" style="background: #edf2f7;">
  <div class="flex h-full antialiased text-gray-800 w-full">
    <div class="flex flex-row h-full w-full overflow-x-hidden">
      <div class="flex flex-col pt-4 pl-6 pr-2 h-screen w-64 bg-white flex-shrink-0">
        <i class="fa-solid fa-arrow-left mb-4"></i>

        <div class="flex flex-row items-center justify-center h-12 w-full">

          <div class="flex items-center justify-center rounded-2xl text-indigo-700 bg-indigo-100 h-10 w-10">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z">
              </path>
            </svg>
          </div>
          <div class="ml-2 font-bold text-xl">zAp 3</div>
        </div>
        <div class="flex flex-col items-center bg-indigo-100 border border-gray-200 mt-4 w-full py-6 px-4 rounded-lg">
          <div class="h-20 w-20 rounded-full border overflow-hidden">
            <img src="https://i.pinimg.com/736x/2c/8a/38/2c8a3855dd719c88c49619b96e2ee2e4.jpg" alt="Avatar"
              class="h-full w-full" />
          </div>
          <div class="text-sm font-semibold mt-2">{{ name }}</div>
        </div>
        <div class="flex flex-col mt-6">
          <div class="flex flex-row items-center justify-between text-xs">
            <span class="font-bold">Caixa de entrada</span>
            <span class="flex items-center justify-center bg-gray-300 h-4 w-4 rounded-full">4</span>
          </div>
          <div class="flex flex-col space-y-1 mt-4 -mx-2 h-72 overflow-y-auto">
            {% for message in messages %}
            {% if message.addressee.id == id %}
            <button class="flex flex-row items-center hover:bg-gray-100 rounded-xl p-2">
              <div class="flex items-center justify-center h-8 w-8 bg-indigo-200 rounded-full">
                {{ message.user_character }}
              </div>
              <div class="flex-column">
                <div class="flex justify-start items-center">
                  <div class="ml-2 text-sm font-semibold">{{ message.sender.name }}</div>
                </div>
                <div style="max-width: 7.6rem;" class="flex truncate justify-start ml-2 text-xs">{{ message.message.text }}</div>
              </div>
              <div style="max-width: 3.4rem" class="ml-auto text-xs">{{ message.created_at }}</div>
            </button>
            {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
      <div class="flex flex-col flex-auto h-full">
        <div class="flex justify-between items-center p-8 h-12 w-full border-b border-gray-300"
          style="background: #f3f4f6">
          <div class="flex justify-center items-center">
            <div class="flex mr-4 items-center justify-center h-8 w-8 bg-gray-200 rounded-full">
              {{ selected_message.user_character }}
            </div>
            <div class="flex-column items-center justify-start">
              <p class="text-base font-bold leading-none">{{ selected_message.message.subject }}</p>
              <div class="text-xs">{{ selected_message.created_at }}</div>
            </div>
          </div>
          <div class="flex justify-center items-center">
            <button class="flex justify-center items-center mr-5">
              <i class="icon clickable fa-sharp fa-solid fa-reply mr-1" aria-hidden="true"></i>
              <p class="text-xs">Responder</p>
            </button>
            <button class="flex justify-center items-center">
              <i class="fa-solid fa-arrow-right mr-1"></i>
              <p class="text-xs">Encaminhar</p>
            </button>
          </div>
        </div>
        <div class="flex flex-col flex-auto flex-shrink-0 rounded-2xl bg-gray-100 h-screen p-2">
          <div class="flex flex-col h-full overflow-x-auto mb-4">
            <div class="flex flex-col h-full overflow-y-auto">
              <div class="col-start-1 col-end-8">
                <div class="flex flex-row items-center">
                  <div class="relative ml-3 text-sm py-2 px-4">
                    <div>De: {{ selected_message.sender.name }}</div>
                    <div>Para: {{ selected_message.addressee.name }}</div>
                  </div>
                </div>
              </div>
              <div class="col-start-1 col-end-8">
                <div class="flex flex-row items-center">
                  <div class="relative ml-3 text-sm py-2 px-4">
                    <div>
                      {{selected_message.message.text}}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>